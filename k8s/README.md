## Домашняя работа к занятию “Kubernetes (к8s)”
## **Цель задания**: 

Написать kubernetes-манифест чтобы понять, как описывать приложение в манифесте для развертывания в k8s.

## **Задание**:

1.	Ответить на вопросы:

●	Что такое k8s?

    Ответ: open-source решение для упрапвления процессами автоматизации, масштабирования конте-ых приложений

●	В чём преимущество контейнеризации над виртуализацией?

    Ответ: 
      - дешевле содержать
      - полный набор зависимостей и компонетнов в том кол-ве и качесвте внутри контейнера, которые еще и мобильны для перемещения
      - легковесность с учетом выполнения пункта выше 

●	В чём состоит принцип самоконтроля k8s?

    Ответ: k8s самотстоятельно перезаппустит отказавшие контейнеры, заменит
    и завершит работу контейнеров, которые не проходят
    проверку работоспособности, определнную пользовательскими настройками

●	Как вы думаете, зачем Вам понимать принципы деплоя в k8s?

    Ответ: назову пожалуй самую очевидную для меня причину: мода и техническое удобство в направлении "микро-сервисности" (хотя некоторые участники рынка все еще используют виртуализацию для деплоя и развертывания своих приложений, но в основном в гос-ом секторе). 
    Каждый сервис деплоить на отдельной ВМ, а тем более ноде - слишком а) затратно финансово, б) затратно по чел. ресурсу и его времени. В этом случае контейниризация может являться решением. 

    Когда сервисов много - нужен иснструмент для управления таким зоопарком.

    Если брать напарвление ДЕ - то масштабный ETL проект, который работает, ну например по принципам DW, и обслуживат несколько заказчиков данных, и еще большее кол-во поставшиков - может работать в рамках контейнеров и общаться между собой, если это необходимо например:

    dock_1 = API для сбора данных

    dock_2 = Валидатор на python, работающим по расписанию в купе с airflow и роутом в кластерный hdfs, для складирования в озеро

    dock_3 = СУБД c бизнес витриной и своей логикой/процедурами/представлениями на основе данных с dock_2

    dock_4 = API доставки данных в заказчика

    Пример выше очень условный, т.к. готовые инстурменты оркестарции вряд-ли будут развертывать в отдельных образах продакшена, но при этом какждый из dock_* обладает необходимым кол-вом ресурсов для работы, т.е. оптимизирован, находится изоллировано от других функциональных предметов, что облегчит мониторинг + и переносим практически на любую ноду

    Либо многочисленные АПИ, которые также работает по принципу "микро-сервисов", тягающие данные с разных хостов и отдающие брокеру или валидатору на стороне потребителя.

    В случае с ростом кол-ва таких сервисов (по сути контейнеров - добавление новых АПИ, напсиание скриптов валидации, которые тянуть данные под конкретные бизнес-задачи и тд) - лучше иметь под рукой иснтурмент, который умеет "этим делом" управлять и оператвино мониторить состояние каждого.

●	Какое из средств управления секретами наиболее распространено в использовании совместно с k8s?

    Ответ: Абстракция Secrets (generic для паролей и токенов,docker regestry для данных авторизации в dr, tls для сертификатов)

●	Какие типы нод есть в k8s, каковы их базовые функции?

    Ответ: Master-node и Worker-node

    Master содержит основные копонеты k8s: API, Sheduler, Controller, ectd

    Worker может содержать Kublet: Kublet, kube-proxy собственно сами Doker контейнеры и окружение / среда выполнения (CRI)

    пример развертывания:

    сторона Master:

    push_manifest -> API -> etcd (хранилище по типу ключ -> значение) \
      -> Controller (Генерит описание манифеста) -> Sheduler (менеджерит нагрузку на Worker ноду, взависимости от нагрзки соотвесвтующего пода/описания пода в манифесте) -> \

     сторона worker:

     Kublet (демон, который раздает команды образам на основе манифеста (в основном на сборку и запуск образа) и команды от шедулера. Есть на всех нодах)
      +
      За сетью следит kube-proxy (следит за доступностью всех контейнеров ноды извне + между собой)
      +
      сама среда выполнения, где развернуты контейнеры
  
  
2.   Написать манифест, который будет содержать в себе следующие условия:

●	apiVersion – v1

●	название – netology-ml

●	внутри него сервер приложений tomcat версии 8.5.69 с портом 8080

●	наличие 2 реплик

●	использование стратегии rollingupdate

---
      apiVersion: v1
      kind: ReplicaSet
      metadata:
        name: netology-ml
       spec:
        replicas: 2
        selector:
          mathchLabels:
            app: app-netlogy-ml
      template:
        metadata:
          labels:
            app: app-netlogy-ml
        spec:
          containers:
          - image: tomcat:8.5.69
            name: tomcat
                - containerPort: 8080
---

Домашнее задание выполните в файле readme.md в github репозитории.

## **Результат**:  
В личном кабинете отправьте на проверку ссылку на .md файл, содержащий ответы на вопросы и kubernetes-манифест.

Также вы можете выполнить задание в Google Docs и отправить в личном кабинете на проверку ссылку на ваш документ. Название файла Google Docs должно содержать номер лекции и фамилию студента. Пример названия: "1.2. Docker — Товаркин Мананаж" Перед тем как выслать ссылку, убедитесь, что ее содержимое не является приватным (открыто на комментирование всем, у кого есть ссылка). Если необходимо прикрепить дополнительные ссылки, просто добавьте их в свой Google Docs.

## **Инструменты**: 

Репозиторий с домашним заданием https://github.com/Netology-DS/devops-mlops/tree/master/k8s   

Любые вопросы по решению задач задавайте в чате Slack.
